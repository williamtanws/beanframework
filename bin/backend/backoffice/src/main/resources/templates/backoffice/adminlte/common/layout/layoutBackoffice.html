<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title layout:title-pattern="$CONTENT_TITLE | $LAYOUT_TITLE" th:text="#{module.backoffice}"></title>
<!-- Tell the browser to be responsive to screen width -->
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<!-- Bootstrap 3.3.7 -->
<link rel="stylesheet" th:href="@{/static/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css}">
<!-- Font Awesome -->
<link rel="stylesheet" th:href="@{/static/adminlte/bower_components/font-awesome/css/font-awesome.min.css}">
<!-- Ionicons -->
<link rel="stylesheet" th:href="@{/static/adminlte/bower_components/Ionicons/css/ionicons.min.css}">
<!-- Bootstrap time Picker -->
<link rel="stylesheet" th:href="@{/static/adminlte/plugins/timepicker/bootstrap-timepicker.min.css}">
<!-- Select2 -->
<link rel="stylesheet" th:href="@{/static/adminlte/bower_components/select2/dist/css/select2.min.css}">
<!-- DataTables -->
<link rel="stylesheet" th:href="@{/static/adminlte/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css}">
<!-- Theme style -->
<link rel="stylesheet" th:href="@{/static/adminlte/dist/css/AdminLTE.min.css}">
<!-- iCheck -->
<link rel="stylesheet" th:href="@{/static/adminlte/plugins/iCheck/square/blue.css}">
<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet" th:href="@{/static/adminlte/dist/css/skins/_all-skins.min.css}">
<!-- Pace style -->
<link rel="stylesheet" th:href="@{/static/adminlte/plugins/pace/themes/white/pace-theme-minimal.css}">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js}"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js}"></script>
  <![endif]-->
<!-- Google Font -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

<link rel="stylesheet" th:href="@{/static/common/common.css}">

<!-- jQuery 3 -->
<script th:src="@{/static/adminlte/bower_components/jquery/dist/jquery.min.js}"></script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{/static/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>
<!-- Select2 -->
<script th:src="@{/static/adminlte/bower_components/select2/dist/js/select2.full.min.js}"></script>
<!-- date-range-picker -->
<script th:src="@{/static/adminlte/bower_components/moment/min/moment.min.js}"></script>
<script th:src="@{/static/adminlte/bower_components/bootstrap-daterangepicker/daterangepicker.js}"></script>
<!-- bootstrap datepicker -->
<script th:src="@{/static/adminlte/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js}"></script>
<!-- bootstrap time picker -->
<script th:src="@{/static/adminlte/plugins/timepicker/bootstrap-timepicker.min.js}"></script>
<!-- SlimScroll -->
<script th:src="@{/static/adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<!-- FastClick -->
<script th:src="@{/static/adminlte/bower_components/fastclick/lib/fastclick.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{/static/adminlte/dist/js/adminlte.min.js}"></script>
<!-- iCheck -->
<script th:src="@{/static/adminlte/plugins/iCheck/icheck.min.js}"></script>
<!-- PACE -->
<script th:src="@{/static/adminlte/plugins/pace/pace.min.js}"></script>
<!-- Bootstrap Validator -->
<script th:src="@{/static/common/js/jquery.validate.min.js}"></script>
<!-- DataTables -->
<script th:src="@{/static/adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/static/adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
</head>
<body class="hold-transition skin-blue sidebar-mini" id="bodyOuter" style="display: none">
	<!-- Site wrapper -->
	<div class="wrapper">

		<th:block th:insert="backoffice/adminlte/common/fragment/main-header :: header"></th:block>

		<!-- =============================================== -->

		<!-- Left side column. contains the sidebar -->
		<th:block th:insert="backoffice/adminlte/common/fragment/main-sidebar :: sidebar"></th:block>

		<!-- =============================================== -->

		<!-- Content Wrapper. Contains page content -->
		<th:block th:insert="backoffice/adminlte/common/fragment/content-wrapper :: wrapper"></th:block>

		<!-- =============================================== -->

		<!-- Footer -->
		<th:block th:insert="backoffice/adminlte/common/fragment/main-footer :: footer"></th:block>

		<!-- =============================================== -->

		<th:block th:insert="backoffice/adminlte/common/fragment/control-sidebar :: sidebar"></th:block>

	</div>
	<!-- ./wrapper -->
	<th:block layout:fragment="pace">
		<script th:inline="javascript">
			/*<![CDATA[*/
			$(document).ajaxStart(function() {
				Pace.restart();
			});
			/*]]>*/
		</script>
	</th:block>
	<script th:inline="javascript">
		/*<![CDATA[*/		
		/* Global javascript here*/
		
		if (sessionStorage.getItem("sidebar-toggle-collapsed")) {
		    $("body").addClass('sidebar-collapse')
		}
		$('#bodyOuter').show();

		$('.sidebar-toggle').click(function() {
		    event.preventDefault();
		    if (Boolean(sessionStorage.getItem("sidebar-toggle-collapsed"))) {
		        sessionStorage.setItem("sidebar-toggle-collapsed", "");
		    } else {
		        sessionStorage.setItem("sidebar-toggle-collapsed", "1");
		    }
		});
		
		$(function() {
		    $('input').iCheck({
		        checkboxClass: 'icheckbox_square-blue',
		        radioClass: 'iradio_square-blue',
		        increaseArea: '20%' // optional
		    });
		});
		
		function changeLocale(locale) {
		    var url = String(window.location.href.replace(
		        /&?locale=([^&]$|[^&]*)/i, ""));
		    if (window.location.href.indexOf('?') > -1) {
		        url = url + '&locale=' + locale;
		    } else {
		        url = url + '?locale=' + locale;
		    }
		
		    window.location.href = url;
		}
		
		$(document).ready(function() {

		    var timeout = /*[[@{${@environment.getProperty('server.servlet.session.timeout')}}]]*/ ;
		    timeout = timeout * 1000;
		
		    var loginPath = /*[[@{${@environment.getProperty('path.backoffice.login')}}]]*/ ;
		    loginPath = loginPath + '?timeout';
		
		    var checktimeoutPath = /*[[@{${@environment.getProperty('path.backoffice.checktimeout')}}]]*/ ;
		
		    $(document).ajaxError(function(e, xhr, options) {
		        if (xhr.status == 403) {
		            window.location.href = loginPath;
		        }
		    });
		
		    function checkTimeout() {
		        $.ajax({
		            type: "GET",
		            url: checktimeoutPath,
		            statusCode: {
		                401: function() {
		                    window.location.href = loginPath;
		                }
		            }
		        });
		    }
		
		    setInterval(checkTimeout, timeout + 5000);
		});
		
		/*]]>*/
	</script>
	<script type="text/javascript" th:src="@{/static/common/common.js}"> </script>
	<th:block layout:fragment="js"></th:block>
</body>
</html>
