<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<body>
	<th:block layout:fragment="search (searchAction, objectSearch, searchFields, displayFields, searchForm )">
		<div class="box box-solid">
			<div class="box-body">
				<!-- search form -->
				<form th:action="${searchAction}" method="get" th:object="${objectSearch}">
					<input type="hidden" name="size" th:value="${pagination.size}">
					<div class="input-group">
						<input type="text" name="searchAll" th:value="${objectSearch.searchAll}" class="form-control">
						<span class="input-group-btn">
							<button type="submit" id="search-btn" class="btn btn-primary" th:text="#{module.backoffice.search}"></button>
							<button type="button" class="btn btn-default btn-flat" data-toggle="modal" data-target="#modal-search" th:title="#{module.backoffice.search.advanced}">
								<span class="fa fa-search-plus"></span>
							</button>
							<a th:href="${searchAction}" class="btn btn-default btn-flat" th:title="#{module.backoffice.refresh}">
								<span class="fa fa-refresh"></span>
							</a>
						</span>
					</div>
				</form>
				<th:block th:each="field,itrStat: ${displayFields}" th:if="${!#strings.isEmpty(objectSearch.__${field}__)}">
					<span th:if="${itrStat.index > 0}">,</span>
					<label class="text-block" th:text="#{module.search.__${field}__}+': '"></label>
					<span class="text-block" th:text="${objectSearch.__${field}__}"></span>
				</th:block>
			</div>
		</div>
		<div class="modal fade" id="modal-search">
			<div class="modal-dialog">
				<div class="modal-content">
					<form th:action="${searchAction}" method="get" th:object="${objectSearch}">
						<input type="hidden" name="size" th:value="${pagination.size}">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title" th:text="#{module.backoffice.search.advanced}"></h4>
						</div>
						<div class="modal-body">
							<div class="form-group" th:each="field : ${searchFields}">
								<label th:text="#{module.search.__${field}__}" th:for="${field}"></label>
								<input type="text" th:name="${field}" th:value="${objectSearch.__${field}__}" class="form-control">
							</div>
							<th:block th:if="${searchForm}" layout:insert="${searchForm} :: searchForm"></th:block>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
							<button type="submit" class="btn btn-primary" th:text="#{module.backoffice.search}" onclick="advancedSearch()"></button>
						</div>
					</form>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
	</th:block>
</body>
</html>