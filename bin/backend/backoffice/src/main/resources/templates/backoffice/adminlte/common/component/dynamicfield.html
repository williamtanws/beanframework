<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<body>
	<th:block layout:fragment="dynamicfield">
		<table id="dynamicfieldTable" class="table table-bordered table-hover">
			<thead>
				<tr>
					<th th:text="#{module.backoffice.id}"></th>
					<th th:text="#{module.dynamicfield.name}"></th>
					<th th:text="#{module.backoffice.select}"></th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="dynamicfield,itrStat : *{dynamicFields}">
					<th>
						<a sec:authorize="hasAuthority('dynamicfield_read')" th:href="@{${@environment.getProperty('path.dynamicfield')}(uuid=${dynamicfield.uuid})}" th:text="${dynamicfield.id}"></a>
						<span sec:authorize="!hasAuthority('dynamicfield_read')" th:text="${dynamicfield.id}"></span>
					</th>
					<td th:text="${dynamicfield.name}"></td>
					<td>
						<input type="hidden" th:name="'dynamicFields['+${itrStat.index}+'].uuid'" th:value="${dynamicfield.uuid}">
						<input type="checkbox" th:name="'dynamicFields['+${itrStat.index}+'].selected'" th:checked="${dynamicfield.selected}">
						<script th:inline="javascript">
							$('input').iCheck({
								checkboxClass : 'icheckbox_square-blue',
								radioClass : 'iradio_square-blue',
								increaseArea : '20%' // optional
							});
						</script>
					</td>
				</tr>
			</tbody>
		</table>
		<script th:inline="javascript">
		    /*<![CDATA[*/
		    	
		    var locale = /*[[${#locale}]]*/;
		    
		    $(document).ready(function() {
		    	
		    	$('#dynamicfieldTable').DataTable({
		    		  'language' : {
				        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
				      },
		    	      'pageLength'  : 10,
		    	      'paging'      : true,
		    	      'lengthChange': false,
		    	      'searching'   : true,
		    	      'ordering'    : true,
		    	      'info'        : false,
		    	      'autoWidth'   : true
		    	})
		    });
		    /*]]>*/
		</script>
	</th:block>
</body>
</html>