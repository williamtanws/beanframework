<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{${@environment.getProperty('layout.backoffice')}}">
<head>
<title th:utext="#{module.company}"></title>
</head>
<body>
	<th:block layout:fragment="update">
		<th:block layout:insert="~{common/adminlte/common/component/delete :: delete (deleteAction=@{${@environment.getProperty('path.company')}}, deleteUuid=${companyDto.uuid})}"></th:block>
		<form id="update-form" role="form" th:action="${@environment.getProperty('path.company')}" method="post" th:object="${companyDto}">
			<input type="hidden" name="create" th:if="*{uuid == null}"/>
			<input type="hidden" name="update" th:if="*{uuid != null}"/>
			<input type="hidden" name="uuid" th:value="${companyDto.uuid}" />
			<div class="row">
				<div class="col-md-12">
					<div class="box box-solid">
						<div class="box-body bg-gray">
							<div class="row">
								<div class="col-xs-4 col-sm-6 col-md-6 col-lg-6">
									<th:block th:if="*{uuid != null}" layout:insert="~{common/adminlte/common/component/delete :: button (deleteAuthority='company_delete')}"></th:block>
								</div>
								<div class="col-xs-8 col-sm-6 col-md-6 col-lg-6" style="text-align: right">
									<th:block layout:insert="~{common/adminlte/common/component/refresh :: button (deleteAuthority='company_delete')}"></th:block>
									<th:block layout:insert="~{common/adminlte/common/component/update :: button (updateAuthority='company_update')}"></th:block>
								</div>
							</div>
						</div>
						<!-- /.box-header -->
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<!-- Custom Tabs -->
					<div class="nav-tabs-custom">
						<ul class="nav nav-tabs">
							<li class="active">
								<a href="#tab_general" data-toggle="tab" th:text="#{module.backoffice.general}" onclick="changeTab('general')"></a>
							</li>
							<li th:if="*{uuid != null}">
								<a href="#tab_history" data-toggle="tab" th:text="#{module.backoffice.history}" onclick="changeTab('history')"></a>
							</li>
							<li th:if="*{uuid != null}">
								<a href="#tab_administration" data-toggle="tab" th:text="#{module.backoffice.administration}" onclick="changeTab('administration')"></a>
							</li>
						</ul>
						<div class="tab-content">
							<div class="tab-pane active" id="tab_general">
								<div class="box-body">
									<div class="row">
										<th:block layout:insert="~{common/adminlte/common/component/general :: general}"></th:block>
									</div>
									<div class="row" style="border-top: 1px solid #f4f4f4; padding-top: 10px;">
										<div class="col-md-6">
											<div class="form-group">
												<label for="name" th:text="#{module.company.name}"></label>
												<span>*</span>
												<input type="text" class="form-control" name="name" th:value="*{name}">
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="description" th:text="#{module.company.description}"></label>
												<textarea class="form-control" name="description" th:text="*{description}"></textarea>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="contactPerson" th:text="#{module.company.contactPerson}"></label>
												<table class="table table-bordered table-hover" id="selectedContactPersonTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-contactPerson"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{contactPerson.uuid}" th:if="*{contactPerson != null}">
															<td><span th:text="*{contactPerson.id}"></span></td>
															<td><span th:text="*{contactPerson.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedContactPerson', [[*{contactPerson.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedContactPerson">
													<input type="hidden" name="selectedContactPerson" th:value="*{contactPerson == null ? '':contactPerson.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="responsibleCompany" th:text="#{module.company.responsibleCompany}"></label>
												<table class="table table-bordered table-hover" id="selectedResponsibleCompanyTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-responsibleCompany"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{responsibleCompany.uuid}" th:if="*{responsibleCompany != null}">
															<td><span th:text="*{responsibleCompany.id}"></span></td>
															<td><span th:text="*{responsibleCompany.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedResponsibleCompany', [[*{responsibleCompany.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedResponsibleCompany">
													<input type="hidden" name="selectedResponsibleCompany" th:value="*{responsibleCompany == null ? '':responsibleCompany.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="country" th:text="#{module.company.country}"></label>
												<table class="table table-bordered table-hover" id="selectedCountryTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-country"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{country.uuid}" th:if="*{country != null}">
															<td><span th:text="*{country.id}"></span></td>
															<td><span th:text="*{country.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedCountry', [[*{country.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedCountry">
													<input type="hidden" name="selectedCountry" th:value="*{country == null ? '':country.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="lineOfBusiness" th:text="#{module.company.lineOfBusiness}"></label>
												<select name="lineOfBusiness" class="form-control">
													<option value="" th:text="'&nbsp'"></option>
													<option th:each="state: ${T(com.beanframework.user.LineOfBusinessType).values()}" th:value="${state.name()}" th:text="${state}"
														th:selected="${companyDto.lineOfBusiness == state}"></option>
												</select>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="buyer" th:text="#{module.company.buyer}"></label>
												<select class="form-control" name="buyer">
													<option value="" th:text="'&nbsp'"></option>
													<option value="1" th:selected="*{buyer == true}" th:text="#{module.backoffice.yes}"></option>
													<option value="0" th:selected="*{buyer == false}" th:text="#{module.backoffice.no}"></option>
												</select>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="manufacturer" th:text="#{module.company.manufacturer}"></label>
												<select class="form-control" name="manufacturer">
													<option value="" th:text="'&nbsp'"></option>
													<option value="1" th:selected="*{manufacturer == true}" th:text="#{module.backoffice.yes}"></option>
													<option value="0" th:selected="*{manufacturer == false}" th:text="#{module.backoffice.no}"></option>
												</select>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="supplier" th:text="#{module.company.supplier}"></label>
												<select class="form-control" name="supplier">
													<option value="" th:text="'&nbsp'"></option>
													<option value="1" th:selected="*{supplier == true}" th:text="#{module.backoffice.yes}"></option>
													<option value="0" th:selected="*{supplier == false}" th:text="#{module.backoffice.no}"></option>
												</select>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="carrier" th:text="#{module.company.carrier}"></label>
												<select class="form-control" name="carrier">
													<option value="" th:text="'&nbsp'"></option>
													<option value="1" th:selected="*{carrier == true}" th:text="#{module.backoffice.yes}"></option>
													<option value="0" th:selected="*{carrier == false}" th:text="#{module.backoffice.no}"></option>
												</select>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="vatId" th:text="#{module.company.vatId}"></label>
												<input type="text" class="form-control" name="vatId" th:value="*{vatId}">
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="dunsId" th:text="#{module.company.dunsId}"></label>
												<input type="text" class="form-control" name="dunsId" th:value="*{dunsId}">
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="ilnId" th:text="#{module.company.ilnId}"></label>
												<input type="text" class="form-control" name="ilnId" th:value="*{ilnId}">
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="buyerSpecificId" th:text="#{module.company.buyerSpecificId}"></label>
												<input type="text" class="form-control" name="buyerSpecificId" th:value="*{buyerSpecificId}">
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="supplierSpecificId" th:text="#{module.company.supplierSpecificId}"></label>
												<input type="text" class="form-control" name="supplierSpecificId" th:value="*{supplierSpecificId}">
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="active" th:text="#{module.company.addresses}"></label>
												<table class="table table-bordered table-hover" id="selectedAddressTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-address"><i class="fa fa-plus"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:each="address : *{addresses}" th:id="'row'+${address.uuid}">
															<td>
																<span th:text="${address.id}"></span>
															</td>
															<td>
																<span th:text="${address.name}"></span>
															</td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedAddresses', [[${address.uuid}]]);"><i class="fa fa-minus"></i></button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedAddresses">
													<th:block th:each="address : *{addresses}">
														<input type="hidden" name="selectedAddresses" th:value="${address.uuid}" />
													</th:block>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="shippingAddress" th:text="#{module.company.shippingAddress}"></label>
												<table class="table table-bordered table-hover" id="selectedShippingAddressTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-shippingAddress"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{shippingAddress.uuid}" th:if="*{shippingAddress != null}">
															<td><span th:text="*{shippingAddress.id}"></span></td>
															<td><span th:text="*{shippingAddress.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedShippingAddress', [[*{shippingAddress.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedShippingAddress">
													<input type="hidden" name="selectedShippingAddress" th:value="*{shippingAddress == null ? '':shippingAddress.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="unloadingAddress" th:text="#{module.company.unloadingAddress}"></label>
												<table class="table table-bordered table-hover" id="selectedUnloadingAddressTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-unloadingAddress"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{unloadingAddress.uuid}" th:if="*{unloadingAddress != null}">
															<td><span th:text="*{unloadingAddress.id}"></span></td>
															<td><span th:text="*{unloadingAddress.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedUnloadingAddress', [[*{unloadingAddress.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedUnloadingAddress">
													<input type="hidden" name="selectedUnloadingAddress" th:value="*{unloadingAddress == null ? '':unloadingAddress.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="billingAddress" th:text="#{module.company.billingAddress}"></label>
												<table class="table table-bordered table-hover" id="selectedBillingAddressTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-billingAddress"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{billingAddress.uuid}" th:if="*{billingAddress != null}">
															<td><span th:text="*{billingAddress.id}"></span></td>
															<td><span th:text="*{billingAddress.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedBillingAddress', [[*{billingAddress.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedBillingAddress">
													<input type="hidden" name="selectedBillingAddress" th:value="*{billingAddress == null ? '':billingAddress.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="contactAddress" th:text="#{module.company.contactAddress}"></label>
												<table class="table table-bordered table-hover" id="selectedContactAddressTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-contactAddress"><i class="fa fa-edit"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:id="'row'+*{contactAddress.uuid}" th:if="*{contactAddress != null}">
															<td><span th:text="*{contactAddress.id}"></span></td>
															<td><span th:text="*{contactAddress.name}"></span></td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedContactAddress', [[*{contactAddress.uuid}]]);">
																	<i class="fa fa-minus"></i>
																</button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedContactAddress">
													<input type="hidden" name="selectedContactAddress" th:value="*{contactAddress == null ? '':contactAddress.uuid}" />
												</div>
												<span class="help-block"></span>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="active" th:text="#{module.company.users}"></label>
												<table class="table table-bordered table-hover" id="selectedUserTable">
													<thead>
														<tr>
															<th style="width:30%" th:text="#{module.backoffice.id}"></th>
															<th th:text="#{module.backoffice.name}"></th>
															<th style="width:1%"><button class="btn btn-default btn-sm" type="button" data-toggle="modal" data-target="#modal-user"><i class="fa fa-plus"></i></button></th>
														</tr>
													</thead>
													<tbody>
														<tr th:each="user : *{users}" th:id="'row'+${user.uuid}">
															<td>
																<span th:text="${user.id}"></span>
															</td>
															<td>
																<span th:text="${user.name}"></span>
															</td>
															<td>
																<button type="button" class="btn btn-default btn-sm" th:onclick="removeSelected('selectedUsers', [[${user.uuid}]]);"><i class="fa fa-minus"></i></button>
															</td>
														</tr>
													</tbody>
												</table>
												<span class="help-block"></span>
												<div id="selectedUsers">
													<th:block th:each="user : *{users}">
														<input type="hidden" name="selectedUsers" th:value="${user.uuid}" />
													</th:block>
												</div>
											</div>
										</div>
									</div>
								</div>
								<!-- /.box-body -->
							</div>
							<!-- /.tab-pane -->
							<div class="tab-pane" id="tab_history" th:if="*{uuid != null}">
								<div class="box-body">
									<th:block layout:insert="~{common/adminlte/common/component/history :: history (historyListUrl=@{${@environment.getProperty('path.api.company.history')}(uuid=*{uuid})} )}"></th:block>
								</div>
							</div>
							<!-- /.tab-pane -->
							<div class="tab-pane" id="tab_administration" th:if="*{uuid != null}">
								<div class="box-body">
									<th:block layout:insert="~{common/adminlte/common/component/administration :: administration}"></th:block>
								</div>
							</div>
							<!-- /.tab-pane -->
						</div>
						<!-- /.tab-content -->
					</div>
					<!-- nav-tabs-custom -->
				</div>
				<!-- /.col -->
			</div>
		</form>
		<div class="modal fade" id="modal-contactPerson">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.company.contactPerson}"></h4>
					</div>
					<div class="modal-body">
						<table id="contactPersonTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.user.page')}}]]*/;
						    
						    var contactPersonTable = $('#contactPersonTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#contactPersonTable').find("input:text").val("");
					                    	  $("#contactPersonTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#contactPersonTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedContactPerson'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#contactPersonTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#contactPersonTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	contactPersonTable.columns().every(function (index) {
						    	    $('#contactPersonTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	contactPersonTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedContactPerson','contactPersonTable','selectedContactPersonTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-responsibleCompany">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.region.responsibleCompany}"></h4>
					</div>
					<div class="modal-body">
						<table id="responsibleCompanyTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.company.page')}}]]*/;
						    
						    var responsibleCompanyTable = $('#responsibleCompanyTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#responsibleCompanyTable').find("input:text").val("");
					                    	  $("#responsibleCompanyTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#responsibleCompanyTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedResponsibleCompany'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#responsibleCompanyTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#responsibleCompanyTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	responsibleCompanyTable.columns().every(function (index) {
						    	    $('#responsibleCompanyTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	responsibleCompanyTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedResponsibleCompany','responsibleCompanyTable','selectedResponsibleCompanyTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-country">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.region.country}"></h4>
					</div>
					<div class="modal-body">
						<table id="countryTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.country.page')}}]]*/;
						    
						    var countryTable = $('#countryTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#countryTable').find("input:text").val("");
					                    	  $("#countryTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#countryTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedCountry'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#countryTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#countryTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	countryTable.columns().every(function (index) {
						    	    $('#countryTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	countryTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedCountry','countryTable','selectedCountryTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-address">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.company.addresses}"></h4>
					</div>
					<div class="modal-body">
						<table id="addressTable" class="table table-bordered table-hover" style="width:100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.address.page')}}]]*/;
						    
						    var addressTable = $('#addressTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#addressTable').find("input:text").val("");
					                    	  $("#addressTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#addressTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedAddresses'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#addressTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#addressTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	addressTable.columns().every(function (index) {
						    	    $('#addressTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	addressTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelects('selectedAddresses','addressTable','selectedAddressTable')" class="btn btn-primary" data-dismiss="modal" th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-shippingAddress">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.address.shippingAddress}"></h4>
					</div>
					<div class="modal-body">
						<table id="shippingAddressTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.address.page')}}]]*/;
						    
						    var shippingAddressTable = $('#shippingAddressTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#shippingAddressTable').find("input:text").val("");
					                    	  $("#shippingAddressTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#shippingAddressTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedShippingAddress'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#shippingAddressTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#shippingAddressTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	shippingAddressTable.columns().every(function (index) {
						    	    $('#shippingAddressTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	shippingAddressTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedShippingAddress','shippingAddressTable','selectedShippingAddressTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-unloadingAddress">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.company.unloadingAddress}"></h4>
					</div>
					<div class="modal-body">
						<table id="unloadingAddressTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.address.page')}}]]*/;
						    
						    var unloadingAddressTable = $('#unloadingAddressTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#unloadingAddressTable').find("input:text").val("");
					                    	  $("#unloadingAddressTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#unloadingAddressTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedUnloadingAddress'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#unloadingAddressTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#unloadingAddressTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	unloadingAddressTable.columns().every(function (index) {
						    	    $('#unloadingAddressTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	unloadingAddressTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedUnloadingAddress','unloadingAddressTable','selectedUnloadingAddressTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		
		<div class="modal fade" id="modal-billingAddress">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.address.billingAddress}"></h4>
					</div>
					<div class="modal-body">
						<table id="billingAddressTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.address.page')}}]]*/;
						    
						    var billingAddressTable = $('#billingAddressTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#billingAddressTable').find("input:text").val("");
					                    	  $("#billingAddressTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#billingAddressTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedBillingAddress'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#billingAddressTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#billingAddressTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	billingAddressTable.columns().every(function (index) {
						    	    $('#billingAddressTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	billingAddressTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedBillingAddress','billingAddressTable','selectedBillingAddressTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-contactAddress">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.address.contactAddress}"></h4>
					</div>
					<div class="modal-body">
						<table id="contactAddressTable" class="table table-bordered table-hover" style="width: 100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.address.page')}}]]*/;
						    
						    var contactAddressTable = $('#contactAddressTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#contactAddressTable').find("input:text").val("");
					                    	  $("#contactAddressTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#contactAddressTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedContactAddress'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#contactAddressTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#contactAddressTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	contactAddressTable.columns().every(function (index) {
						    	    $('#contactAddressTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	contactAddressTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelect('selectedContactAddress','contactAddressTable','selectedContactAddressTable')" class="btn btn-primary" data-dismiss="modal"
							th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<div class="modal fade" id="modal-user">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" th:text="#{module.company.users}"></h4>
					</div>
					<div class="modal-body">
						<table id="userTable" class="table table-bordered table-hover" style="width:100%">
							<thead>
								<tr>
									<th th:text="#{module.backoffice.id}" class="text-center"></th>
									<th th:text="#{module.backoffice.name}" class="text-center"></th>
									<th th:text="#{module.backoffice.select}" class="text-center"></th>
								</tr>
							</thead>
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
						</table>
						<script th:inline="javascript">
						    /*<![CDATA[*/
						    	
						    var locale = /*[[${#locale}]]*/;
						    
						    var ajaxUrl = /*[[@{${@environment.getProperty('path.api.user.page')}}]]*/;
						    
						    var userTable = $('#userTable').DataTable({
					    		  'language' : {
							        'url' : '/static/common/plugin/datatables/language/'+locale+'.json'
							      },
					    	      'pageLength'  : 10,
					    	      'paging'      : true,
					    	      'lengthChange': true,
					    	      'searching'   : true,
					    	      'ordering'    : true,
					    	      'info'        : true,
					    	      'autoWidth'   : true,
					    	      'processing': true,
					    	      'serverSide': true,
					    	      'searchDelay': 1000,
						    	  'bStateSave': false,
					    	      'dom': "<'row'<'col-sm-12 col-md-6'Bl><'col-sm-12 col-md-6'f>>" +
					    	      "<'row'<'col-sm-12'tr>>" +
					    	      "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>", 
					    	      'buttons': [
					                  {
					                      text: 'Clear', className: 'btn btn-primary btn-datatable', init: function(api, node, config) { $(node).removeClass('dt-button') },
					                      action: function ( e, dt, node, config ) {
					                    	  dt.search('').columns().search('').draw();dt.order.neutral().draw();
					                    	  $('#userTable').find("input:text").val("");
					                    	  $("#userTable").find("select").each(function () { // there is no such thing as input[type=select] 
					                    	        this.selectedIndex = 0; // this is a <select>
					                    	  });
					                    	  $('#userTable .select2').val('').trigger('change');
					                      }
					                  }
					              ],
					    	      'ajax': {
					                    'url': ajaxUrl
					              },
					              'columns': [
					                    { "data": "id" },
					                    { "data": "name" },
					                    { "data": "" }
					              ],
					    	      'columnDefs': [
					    	            { 
					    	                targets: 2,
					    	                'searchable': false,
					    	                'orderable': false,
					    	                'className': 'text-center',
					    	                render: function(data, type, row, meta)
					    	                {
					    	                	return "<input type='radio' value='"+JSON.stringify(row)+"' name='tableSelectedUsers'>"; 
					    	                }
					    	            },
						            	{                                 
						                	"targets": '_all',
						                	"render": $.fn.dataTable.render.text()
						                }              
					    	       ]
					    	});
						    
						    $('.table').on('draw.dt', function () {
						    	$('input').iCheck({
									checkboxClass : 'icheckbox_square-blue',
									radioClass : 'iradio_square-blue',
									increaseArea : '20%' // optional
								});
						    });
						    
						    $(document).ready(function ()
						    {
						    	$('#userTable thead tr:eq(1) th').each(function(index){
						    		if(index < 2){
						    			var title = $('#userTable thead tr:eq(0) th').eq( $(this).index() ).text();
						    			var searchPlaceHolder = /*[[#{module.backoffice.search}]]*/;
						            	$(this).html('<input type="text" class="form-control" style="width: 100%;" placeholder="' + searchPlaceHolder + ' '+ title + '" />');
						    		} else{
							            $(this).html('');
						    		}
						        });
						    	
						    	userTable.columns().every(function (index) {
						    	    $('#userTable thead tr:eq(1) th:eq(' + index + ') input').on('keyup change', function () {
						    	    	userTable.column($(this).parent().index() + ':visible')
						    	            .search(this.value)
						    	            .draw();
						    	    });
						    	});
						    });
						    /*]]>*/
						</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" th:text="'  '+#{module.backoffice.cancel}+'  '"></button>
						<button type="button" th:onclick="addSelects('selectedUsers','userTable','selectedUserTable')" class="btn btn-primary" data-dismiss="modal" th:text="'  '+#{module.backoffice.select}+'  '"></button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<script th:inline="javascript">
		    /*<![CDATA[*/
		    $(document).ready(function() {
		        $('#update-form').validate({
		        	onkeyup: function(element) {
		                this.element(element);
		            },
		        	onfocusout: false,
		            invalidHandler: function(form, validator) {
		                var errors = validator.numberOfInvalids();
		                if (errors) {                    
		                    validator.errorList[0].element.focus();
		                }
		            },
		            rules: {
		            	id: {
		                    required: true,
		                    remote: {
		                        url: /*[[${@environment.getProperty('path.api.company.checkid')}]]*/ ,
		                        type: "get",
		                        data: {
		                            uuid: /*[[${companyDto.uuid}]]*/ ,
		                            id: function() {
		                                return $("#update-form input[name='id']").val();
		                            }
		                        }
		                    }
		                },
		                name: {
		                    required: true
		                }
		            },
		            highlight: function(element) {
		                $(element).closest('.form-group').addClass('has-error');
		                
		                var id = $(element).closest('.tab-pane').attr('id');
		                $('.tab-content.tab-validate .tab-pane:has(div.has-error)').each(function() {
		                    $('.nav.nav-tabs').find('a[href^="#' + id + '"]').css('color','#dd4b39');
		                });
		            },
		            unhighlight: function(element) {
		                $(element).closest('.form-group').removeClass('has-error');
		                $(element).closest('.form-group').find('.help-block').html('');
		                
		                var id = $(element).closest('.tab-pane').attr('id');
		                var noError = true;
		                $('.tab-content.tab-validate .tab-pane:has(div.has-error)').each(function() {
		                    noError = false;
		                });
		                if(noError){
			                $('.nav.nav-tabs').find('a[href^="#' + id + '"]').css('color','black');
		                }
		            },
		            errorPlacement: function(error, element) {
		                element.closest('.form-group').find('.help-block').html(error.text());
		            }
		        });
		
		    });
		    /*]]>*/
		</script>

	</th:block>
</body>
</html>